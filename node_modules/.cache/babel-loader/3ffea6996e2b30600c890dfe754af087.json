{"ast":null,"code":"import _regeneratorRuntime from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/miguelmerchan/Documents/GitHub/5-generausdt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Select from'react-select';import Utils from\"../../utils\";import cons from\"../../cons.js\";var CrowdFunding=/*#__PURE__*/function(_Component){_inherits(CrowdFunding,_Component);var _super=_createSuper(CrowdFunding);function CrowdFunding(props){var _this;_classCallCheck(this,CrowdFunding);_this=_super.call(this,props);_this.state={min:100,deposito:\"Loading...\",balance:\"Loading...\",accountAddress:\"Loading...\",porcentaje:\"Loading...\",dias:\"Loading...\",partner:\"Loading...\",balanceTRX:\"Loading...\",balanceUSDT:\"Loading...\",precioSITE:1,valueUSDT:0,hand:0};_this.deposit=_this.deposit.bind(_assertThisInitialized(_this));_this.estado=_this.estado.bind(_assertThisInitialized(_this));_this.estado2=_this.estado2.bind(_assertThisInitialized(_this));_this.rateSITE=_this.rateSITE.bind(_assertThisInitialized(_this));_this.handleChangeUSDT=_this.handleChangeUSDT.bind(_assertThisInitialized(_this));return _this;}_createClass(CrowdFunding,[{key:\"handleChangeUSDT\",value:function handleChangeUSDT(event){//console.log(event)\nthis.setState({valueUSDT:event.value});}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Utils.setContract(window.tronWeb,this.props.contractAddress);case 2:this.estado();setInterval(function(){return _this2.estado();},3*1000);setInterval(function(){return _this2.estado2();},3*1000);case 5:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"rateSITE\",value:function(){var _rateSITE=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",1);case 1:case\"end\":return _context2.stop();}}},_callee2);}));function rateSITE(){return _rateSITE.apply(this,arguments);}return rateSITE;}()},{key:\"estado\",value:function(){var _estado=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var accountAddress,inversors,options,datos,direccioncontract,contractSITE,aprovado,top,index,precio,active;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:accountAddress=window.tronWeb.defaultAddress.base58;_context3.next=3;return Utils.contract.investors(accountAddress).call();case 3:inversors=_context3.sent;options=[];datos={};inversors.inicio=1000;_context3.next=9;return Utils.contract.tokenPricipal().call();case 9:direccioncontract=_context3.sent;_context3.next=12;return window.tronWeb.contract().at(direccioncontract);case 12:contractSITE=_context3.sent;_context3.next=15;return contractSITE.allowance(accountAddress,this.props.contractAddress).call();case 15:aprovado=_context3.sent;//aprovado = parseInt(aprovado._hex);\nif(aprovado.remaining){aprovado=parseInt(aprovado.remaining._hex);}else{aprovado=parseInt(aprovado._hex);}if(!(aprovado>0)){_context3.next=34;break;}_context3.next=20;return Utils.contract.plansLength().call();case 20:top=_context3.sent;index=0;case 22:if(!(index<top)){_context3.next=34;break;}_context3.next=25;return Utils.contract.plans(index).call();case 25:precio=_context3.sent;_context3.next=28;return Utils.contract.active(index).call();case 28:active=_context3.sent;precio=parseInt(precio)/Math.pow(10,6);if(precio>0&&active&&inversors.registered){datos={};datos.value=index;datos.label=precio+' USDT';options[index]=datos;}case 31:index++;_context3.next=22;break;case 34:this.setState({options:options});case 35:case\"end\":return _context3.stop();}}},_callee3,this);}));function estado(){return _estado.apply(this,arguments);}return estado;}()},{key:\"estado2\",value:function(){var _estado2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var accountAddress,inversors,inicio,fin,texto,direccioncontract,contractSITE,nameToken1,aprovado,tiempo,porcentiempo,decimales,balance,valorPlan,partner,hand,loc,getString,GET,get,i,l,tmp,wallet,dias,porcentaje,balanceTRX,direccioncontract2,contractUSDT,nameToken2,decimals,balanceUSDT;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:accountAddress=window.tronWeb.defaultAddress.base58;_context4.next=3;return Utils.contract.investors(accountAddress).call();case 3:inversors=_context4.sent;inicio=accountAddress.substr(0,4);fin=accountAddress.substr(-4);texto=inicio+\"...\"+fin;document.getElementById(\"contract\").innerHTML='<a href=\"https://tronscan.org/#/contract/'+this.props.contractAddress+'/code\">Contract V '+this.props.version+'</a>';document.getElementById(\"login\").href=\"https://tronscan.io/#/address/\".concat(accountAddress);document.getElementById(\"login-my-wallet\").innerHTML=texto;_context4.next=12;return Utils.contract.tokenPricipal().call();case 12:direccioncontract=_context4.sent;_context4.next=15;return window.tronWeb.contract().at(direccioncontract);case 15:contractSITE=_context4.sent;_context4.next=18;return contractSITE.symbol().call();case 18:nameToken1=_context4.sent;_context4.next=21;return contractSITE.allowance(accountAddress,this.props.contractAddress).call();case 21:aprovado=_context4.sent;//console.log(aprovado);\nif(aprovado.remaining){aprovado=parseInt(aprovado.remaining._hex);}else{aprovado=parseInt(aprovado._hex);}//console.log(aprovado);\nif(aprovado>0){if(!inversors.registered){aprovado=\"Register\";}else{aprovado=\"Buy Plan\";}}else{aprovado=\"Allow wallet\";}inversors.inicio=1000;_context4.next=27;return Utils.contract.tiempo().call();case 27:tiempo=_context4.sent;tiempo=parseInt(tiempo._hex)*1000;porcentiempo=(Date.now()-inversors.inicio)*100/tiempo;_context4.next=32;return contractSITE.decimals().call();case 32:decimales=_context4.sent;_context4.next=35;return contractSITE.balanceOf(accountAddress).call();case 35:balance=_context4.sent;balance=parseInt(balance._hex)/Math.pow(10,decimales);valorPlan=0;if(porcentiempo<100){aprovado=\"Update Plan\";valorPlan=inversors.plan/Math.pow(10,8);}partner=cons.WS;hand=\"Left \";if(!inversors.registered){_context4.next=49;break;}_context4.t0=window.tronWeb.address;_context4.next=45;return Utils.contract.padre(accountAddress).call();case 45:_context4.t1=_context4.sent;partner=_context4.t0.fromHex.call(_context4.t0,_context4.t1);_context4.next=67;break;case 49:loc=document.location.href;if(!(loc.indexOf('?')>0)){_context4.next=67;break;}getString=loc.split('?');getString=getString[getString.length-1];//console.log(getString);\nGET=getString.split('&');get={};for(i=0,l=GET.length;i<l;i++){tmp=GET[i].split('=');get[tmp[0]]=unescape(decodeURI(tmp[1]));}if(get['hand']){tmp=get['hand'].split('#');//console.log(tmp);\nif(tmp[0]===\"right\"){hand=\"Rigth \";}}if(!get['ref']){_context4.next=67;break;}tmp=get['ref'].split('#');//console.log(tmp[0]);\n_context4.next=61;return Utils.contract.idToAddress(tmp[0]).call();case 61:wallet=_context4.sent;wallet=window.tronWeb.address.fromHex(wallet);_context4.next=65;return Utils.contract.investors(wallet).call();case 65:inversors=_context4.sent;if(inversors.registered){partner=\"team \"+hand+\" of \"+wallet;}case 67:if(partner===\"T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb\"){partner=\"---------------------------------\";}dias=365;//await Utils.contract.tiempo().call();\n//var velocidad = await Utils.contract.velocidad().call();\n//dias = (parseInt(dias)/86400)*velocidad;\n_context4.next=71;return Utils.contract.porcent().call();case 71:porcentaje=_context4.sent;porcentaje=parseInt(porcentaje);_context4.next=75;return window.tronWeb.trx.getBalance();case 75:balanceTRX=_context4.sent;balanceTRX=balanceTRX/Math.pow(10,6);_context4.next=79;return Utils.contract.tokenPago().call();case 79:direccioncontract2=_context4.sent;_context4.next=82;return window.tronWeb.contract().at(direccioncontract2);case 82:contractUSDT=_context4.sent;_context4.next=85;return contractUSDT.symbol().call();case 85:nameToken2=_context4.sent;_context4.next=88;return contractUSDT.decimals().call();case 88:decimals=_context4.sent;_context4.next=91;return contractUSDT.balanceOf(accountAddress).call();case 91:balanceUSDT=_context4.sent;balanceUSDT=parseInt(balanceUSDT)/Math.pow(10,decimals);this.setState({deposito:aprovado,balance:valorPlan,decimales:decimales,accountAddress:accountAddress,porcentaje:porcentaje,dias:dias,partner:partner,balanceSite:balance,balanceTRX:balanceTRX,balanceUSDT:balanceUSDT,nameToken1:nameToken1,nameToken2:nameToken2});case 94:case\"end\":return _context4.stop();}}},_callee4,this);}));function estado2(){return _estado2.apply(this,arguments);}return estado2;}()},{key:\"deposit\",value:function(){var _deposit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _this$state,balanceSite,balanceTRX,valueUSDT,balance,accountAddress,tronUSDT,direccioncontract,contractUSDT,aprovado,amount,loc,sponsor,hand,investors,getString,GET,get,i,l,tmp,wallet,padre,reg,userWithdrable,MIN_RETIRO,despositos,buy;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$state=this.state,balanceSite=_this$state.balanceSite,balanceTRX=_this$state.balanceTRX,valueUSDT=_this$state.valueUSDT,balance=_this$state.balance;accountAddress=window.tronWeb.defaultAddress.base58;_context5.next=4;return window.tronWeb;case 4:tronUSDT=_context5.sent;_context5.next=7;return Utils.contract.tokenPricipal().call();case 7:direccioncontract=_context5.sent;_context5.next=10;return tronUSDT.contract().at(direccioncontract);case 10:contractUSDT=_context5.sent;_context5.next=13;return contractUSDT.allowance(accountAddress,this.props.contractAddress).call();case 13:aprovado=_context5.sent;aprovado=parseInt(aprovado.remaining._hex);//aprovado = parseInt(aprovado._hex);\nif(!(aprovado<=0&&balanceTRX>=50)){_context5.next=20;break;}_context5.next=18;return contractUSDT.approve(this.props.contractAddress,\"115792089237316195423570985008687907853269984665640564039457584007913129639935\").send();case 18:window.alert(\"Balance approval for exchange: successful\");return _context5.abrupt(\"return\");case 20:_context5.next=22;return Utils.contract.plans(valueUSDT).call();case 22:amount=_context5.sent;amount=parseInt(amount._hex)/Math.pow(10,8);amount=amount-balance;amount=amount/this.state.precioSITE;if(!(aprovado>0&&balanceSite>=amount&&balanceTRX>=50)){_context5.next=106;break;}loc=document.location.href;sponsor=cons.WS;hand=0;_context5.next=32;return Utils.contract.investors(accountAddress).call();case 32:investors=_context5.sent;if(!investors.registered){_context5.next=39;break;}_context5.next=36;return Utils.contract.padre(accountAddress).call();case 36:sponsor=_context5.sent;_context5.next=56;break;case 39:if(!(loc.indexOf('?')>0)){_context5.next=56;break;}getString=loc.split('?');getString=getString[getString.length-1];//console.log(getString);\nGET=getString.split('&');get={};for(i=0,l=GET.length;i<l;i++){tmp=GET[i].split('=');get[tmp[0]]=unescape(decodeURI(tmp[1]));}if(get['hand']){tmp=get['hand'].split('#');if(tmp[0]===\"right\"){hand=1;}}if(!get['ref']){_context5.next=56;break;}tmp=get['ref'].split('#');_context5.next=50;return Utils.contract.idToAddress(tmp[0]).call();case 50:wallet=_context5.sent;wallet=window.tronWeb.address.fromHex(wallet);_context5.next=54;return Utils.contract.investors(wallet).call();case 54:padre=_context5.sent;if(padre.registered){sponsor=wallet;}case 56:if(investors.registered){_context5.next=60;break;}reg=Utils.contract.registro(sponsor,hand).send();reg.then(function(){return window.alert(\"congratulation registration: successful\");});return _context5.abrupt(\"return\");case 60:_context5.t0=sponsor!==\"T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb\"&&investors.registered;if(!_context5.t0){_context5.next=65;break;}_context5.next=64;return Utils.contract.active(valueUSDT).call();case 64:_context5.t0=_context5.sent;case 65:if(!_context5.t0){_context5.next=96;break;}_context5.next=68;return Utils.contract.withdrawable(accountAddress).call();case 68:userWithdrable=_context5.sent;userWithdrable=parseInt(userWithdrable._hex);_context5.next=72;return Utils.contract.MIN_RETIRO().call();case 72:MIN_RETIRO=_context5.sent;MIN_RETIRO=parseInt(MIN_RETIRO._hex);_context5.next=76;return Utils.contract.depositos(accountAddress).call();case 76:despositos=_context5.sent;console.log(despositos[0].length);if(!(userWithdrable>MIN_RETIRO)){_context5.next=93;break;}window.alert(\"Va comprar plan de menor o igual valor debe retirar lo disponible para continuar.\");if(!window.confirm(\"¿Desea realizar el retiro de su disponible?.\")){_context5.next=87;break;}_context5.next=83;return Utils.contract.withdraw().send();case 83:buy=Utils.contract.buyPlan(valueUSDT).send();buy.then(function(){return window.alert(\"Felicidades inversión exitosa\");}).then(function(){return document.getElementById(\"services\").scrollIntoView({block:\"start\",behavior:\"smooth\"});});_context5.next=93;break;case 87:if(!window.confirm(\"¿Desea ccontinuar sin hacer un retiro?, si lo hace se reinvertira el disponible en el sistema de forma automatica.\")){_context5.next=92;break;}buy=Utils.contract.buyPlan(valueUSDT).send();buy.then(function(){return window.alert(\"Felicidades inversión exitosa\");}).then(function(){return document.getElementById(\"services\").scrollIntoView({block:\"start\",behavior:\"smooth\"});});_context5.next=93;break;case 92:return _context5.abrupt(\"return\");case 93:if(despositos[0].length===0){buy=Utils.contract.buyPlan(valueUSDT).send();buy.then(function(){return window.alert(\"Felicidades inversión exitosa\");}).then(function(){return document.getElementById(\"services\").scrollIntoView({block:\"start\",behavior:\"smooth\"});});}_context5.next=104;break;case 96:_context5.next=98;return Utils.contract.active(valueUSDT).call();case 98:_context5.t1=_context5.sent;if(!(_context5.t1===false)){_context5.next=103;break;}window.alert(\"Please select an active plan\");_context5.next=104;break;case 103:window.alert(\"Please use referral link to buy a plan\");case 104:_context5.next=108;break;case 106:if(balanceSite<amount){window.alert(\"You do not have enough balance, you need: \"+amount+\" USDT and in your wallet you have: \"+balanceSite);}if(balanceTRX<50){window.alert(\"Your account must have at least 150 TRX to execute the transactions correctly\");}case 108:case\"end\":return _context5.stop();}}},_callee5,this);}));function deposit(){return _deposit.apply(this,arguments);}return deposit;}()},{key:\"render\",value:function render(){var _this3=this;var options=this.state.options;var segundoToken=/*#__PURE__*/React.createElement(React.Fragment,null);if(this.state.nameToken1!==this.state.nameToken2){segundoToken=/*#__PURE__*/React.createElement(React.Fragment,null,this.state.nameToken2,\": \",/*#__PURE__*/React.createElement(\"strong\",null,(this.state.balanceUSDT*1).toFixed(6)),/*#__PURE__*/React.createElement(\"br\",null));}return/*#__PURE__*/React.createElement(\"div\",{className:\"card wow bounceInUp text-center col-md-7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"card-title\",id:\"contract\"},\"Contract V \",this.props.version),/*#__PURE__*/React.createElement(\"table\",{className:\"table borderless\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check-circle-o text-success\"}),\"ROI \"),/*#__PURE__*/React.createElement(\"td\",null,this.state.porcentaje,\"%\")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check-circle-o text-success\"}),\"Earn\"),/*#__PURE__*/React.createElement(\"td\",null,this.state.porcentaje-100,\"%\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},\"Wallet\",/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},/*#__PURE__*/React.createElement(\"strong\",null,this.state.accountAddress),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text \"},this.state.nameToken1,\": \",/*#__PURE__*/React.createElement(\"strong\",null,this.state.balanceSite),\" ($\",(this.state.balanceSite*this.state.precioSITE).toFixed(2),\")\",/*#__PURE__*/React.createElement(\"br\",null),\"TRX: \",/*#__PURE__*/React.createElement(\"strong\",null,(this.state.balanceTRX*1).toFixed(6)),/*#__PURE__*/React.createElement(\"br\",null),segundoToken),/*#__PURE__*/React.createElement(\"h4\",null,\"Plan Staking\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group sm-3 text-center\"},/*#__PURE__*/React.createElement(Select,{options:options,onChange:this.handleChangeUSDT,className:\"form-control mb-20 h-auto\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"At least 150 TRX to make any transactions\"),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Partner:\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",null,this.state.partner)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-lg btn-success\",onClick:function onClick(){return _this3.deposit();}},this.state.deposito))));}}]);return CrowdFunding;}(Component);export{CrowdFunding as default};","map":{"version":3,"sources":["/Users/miguelmerchan/Documents/GitHub/5-generausdt/src/components/CrowdFunding/index.js"],"names":["React","Component","Select","Utils","cons","CrowdFunding","props","state","min","deposito","balance","accountAddress","porcentaje","dias","partner","balanceTRX","balanceUSDT","precioSITE","valueUSDT","hand","deposit","bind","estado","estado2","rateSITE","handleChangeUSDT","event","setState","value","setContract","window","tronWeb","contractAddress","setInterval","defaultAddress","base58","contract","investors","call","inversors","options","datos","inicio","tokenPricipal","direccioncontract","at","contractSITE","allowance","aprovado","remaining","parseInt","_hex","plansLength","top","index","plans","precio","active","registered","label","substr","fin","texto","document","getElementById","innerHTML","version","href","symbol","nameToken1","tiempo","porcentiempo","Date","now","decimals","decimales","balanceOf","valorPlan","plan","WS","address","padre","fromHex","loc","location","indexOf","getString","split","length","GET","get","i","l","tmp","unescape","decodeURI","idToAddress","wallet","porcent","trx","getBalance","tokenPago","direccioncontract2","contractUSDT","nameToken2","balanceSite","tronUSDT","approve","send","alert","amount","sponsor","reg","registro","then","withdrawable","userWithdrable","MIN_RETIRO","depositos","despositos","console","log","confirm","withdraw","buy","buyPlan","scrollIntoView","block","behavior","segundoToken","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Select from 'react-select'\nimport Utils from \"../../utils\";\n\nimport cons from \"../../cons.js\";\n\nexport default class CrowdFunding extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n\n      min: 100,\n      deposito: \"Loading...\",\n      balance: \"Loading...\",\n      accountAddress: \"Loading...\",\n      porcentaje: \"Loading...\",\n      dias: \"Loading...\",\n      partner: \"Loading...\",\n      balanceTRX: \"Loading...\",\n      balanceUSDT: \"Loading...\",\n      precioSITE: 1,\n      valueUSDT: 0,\n      hand: 0\n\n    };\n\n    this.deposit = this.deposit.bind(this);\n    this.estado = this.estado.bind(this);\n    this.estado2 = this.estado2.bind(this);\n\n    this.rateSITE = this.rateSITE.bind(this);\n    this.handleChangeUSDT = this.handleChangeUSDT.bind(this);\n  }\n\n  handleChangeUSDT(event) {\n    //console.log(event)\n    this.setState({valueUSDT: event.value});\n  }\n\n  async componentDidMount() {\n    await Utils.setContract(window.tronWeb, this.props.contractAddress);\n    this.estado();\n    setInterval(() => this.estado(),3*1000);\n    setInterval(() => this.estado2(),3*1000);\n  };\n\n  async rateSITE(){\n    /*\n    var proxyUrl = cons.proxy;\n    var apiUrl = cons.PRE;\n    var response;\n\n    try {\n      response = await fetch(proxyUrl+apiUrl);\n    } catch (err) {\n      console.log(err);\n      return this.state.precioSITE;\n    }\n\n    var json = await response.json();\n\n    this.setState({\n      precioSITE: json.Data.precio\n    });\n\n    return json.Data.precio;*/\n\n    return 1;\n\n  };\n\n  async estado(){\n    var accountAddress =  window.tronWeb.defaultAddress.base58;\n    var inversors = await Utils.contract.investors(accountAddress).call();\n\n    var options = [];\n\n    var datos = {};\n\n    inversors.inicio = 1000;\n\n    var direccioncontract = await Utils.contract.tokenPricipal().call();\n\n    var contractSITE = await window.tronWeb.contract().at(direccioncontract);\n    var aprovado = await contractSITE.allowance(accountAddress,this.props.contractAddress).call();\n    \n    //aprovado = parseInt(aprovado._hex);\n    if(aprovado.remaining){\n      aprovado = parseInt(aprovado.remaining._hex);\n    }else{\n      aprovado = parseInt(aprovado._hex);\n    }\n    \n\n    if (aprovado > 0) {\n\n      var top = await Utils.contract.plansLength().call();\n\n      for (let index = 0; index < top; index++) {\n        var precio = await Utils.contract.plans(index).call();\n        var active = await Utils.contract.active(index).call();\n        precio = parseInt(precio)/10**6;\n        if( precio > 0 && active && inversors.registered){\n          datos = {};\n          datos.value = index;\n          datos.label = precio+' USDT';\n          options[index] = datos;\n\n        }\n        \n        \n      }\n    }\n\n    this.setState({\n      options: options\n    });\n\n  }\n\n  async estado2(){\n\n    var accountAddress =  window.tronWeb.defaultAddress.base58;\n    var inversors = await Utils.contract.investors(accountAddress).call();\n\n    var inicio = accountAddress.substr(0,4);\n    var fin = accountAddress.substr(-4);\n\n    var texto = inicio+\"...\"+fin;\n\n    document.getElementById(\"contract\").innerHTML = '<a href=\"https://tronscan.org/#/contract/'+this.props.contractAddress+'/code\">Contract V '+this.props.version+'</a>';\n    document.getElementById(\"login\").href = `https://tronscan.io/#/address/${accountAddress}`;\n    document.getElementById(\"login-my-wallet\").innerHTML = texto;\n\n    var direccioncontract = await Utils.contract.tokenPricipal().call();\n    \n    var contractSITE = await window.tronWeb.contract().at(direccioncontract);\n\n    var nameToken1 = await contractSITE.symbol().call();\n\n    //console.log(nameToken1);\n\n    var aprovado = await contractSITE.allowance(accountAddress,this.props.contractAddress).call();\n    //console.log(aprovado);\n\n    if(aprovado.remaining){\n      aprovado = parseInt(aprovado.remaining._hex);\n    }else{\n      aprovado = parseInt(aprovado._hex);\n    }\n\n    //console.log(aprovado);\n\n    if (aprovado > 0) {\n      if(!inversors.registered){\n        aprovado = \"Register\";\n      }else{\n        aprovado = \"Buy Plan\";\n      }\n      \n    }else{\n      aprovado = \"Allow wallet\";\n    }\n\n    inversors.inicio = 1000;\n    \n    var tiempo = await Utils.contract.tiempo().call();\n    tiempo = parseInt(tiempo._hex)*1000;\n\n    var porcentiempo = ((Date.now()-inversors.inicio)*100)/tiempo;\n\n    var decimales = await contractSITE.decimals().call();\n\n    var balance = await contractSITE.balanceOf(accountAddress).call();\n    balance = parseInt(balance._hex)/10**decimales;\n\n    var valorPlan = 0;\n\n    if( porcentiempo < 100 ){\n      aprovado = \"Update Plan\";\n\n      valorPlan = inversors.plan/10**8;\n      \n    }\n\n    var partner = cons.WS;\n\n    var hand = \"Left \";\n\n    if ( inversors.registered ) {\n      partner = window.tronWeb.address.fromHex(await Utils.contract.padre(accountAddress).call());\n    }else{\n\n      var loc = document.location.href;\n      if(loc.indexOf('?')>0){\n          var getString = loc.split('?');\n          getString = getString[getString.length-1];\n          //console.log(getString);\n          var GET = getString.split('&');\n          var get = {};\n          for(var i = 0, l = GET.length; i < l; i++){\n              var tmp = GET[i].split('=');\n              get[tmp[0]] = unescape(decodeURI(tmp[1]));\n          }\n\n          if (get['hand']){\n            tmp = get['hand'].split('#');\n\n            //console.log(tmp);\n\n            if (tmp[0] === \"right\") {\n              hand = \"Rigth \";\n            }\n          }\n\n          if (get['ref']) {\n            tmp = get['ref'].split('#');\n\n            //console.log(tmp[0]);\n\n            var wallet = await Utils.contract.idToAddress(tmp[0]).call();\n            wallet = window.tronWeb.address.fromHex(wallet);\n\n            inversors = await Utils.contract.investors(wallet).call();\n\n            if ( inversors.registered ) {\n              partner = \"team \"+hand+\" of \"+wallet;\n            }\n          }\n\n          \n      }\n\n    }\n\n    if(partner === \"T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb\"){\n      partner = \"---------------------------------\";\n    }\n    \n\n    var dias = 365;//await Utils.contract.tiempo().call();\n\n    //var velocidad = await Utils.contract.velocidad().call();\n\n    //dias = (parseInt(dias)/86400)*velocidad;\n\n    var porcentaje = await Utils.contract.porcent().call();\n\n    porcentaje = parseInt(porcentaje);\n\n    var balanceTRX = await window.tronWeb.trx.getBalance();\n    balanceTRX = balanceTRX/10**6;\n\n    var direccioncontract2 = await Utils.contract.tokenPago().call();  \n    //var direccioncontract2 = \"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t\";// USDT contrato o secundario\n\n    var contractUSDT = await window.tronWeb.contract().at(direccioncontract2);\n    var nameToken2 = await contractUSDT.symbol().call();\n    var decimals = await contractUSDT.decimals().call();\n\n    var balanceUSDT = await contractUSDT.balanceOf(accountAddress).call();\n\n    balanceUSDT = parseInt(balanceUSDT)/10**decimals;\n\n    this.setState({\n      deposito: aprovado,\n      balance: valorPlan,\n      decimales: decimales,\n      accountAddress: accountAddress,\n      porcentaje: porcentaje,\n      dias: dias,\n      partner: partner,\n      balanceSite: balance,\n      balanceTRX: balanceTRX,\n      balanceUSDT: balanceUSDT,\n      nameToken1: nameToken1,\n      nameToken2: nameToken2\n    });\n  }\n\n\n  async deposit() {\n\n    var { balanceSite, balanceTRX, valueUSDT , balance} = this.state;\n\n    var accountAddress =  window.tronWeb.defaultAddress.base58;\n\n    var tronUSDT = await window.tronWeb;\n    var direccioncontract = await Utils.contract.tokenPricipal().call();\n    var contractUSDT = await tronUSDT.contract().at(direccioncontract);\n    var aprovado = await contractUSDT.allowance(accountAddress,this.props.contractAddress).call();\n\n    aprovado = parseInt(aprovado.remaining._hex);\n    //aprovado = parseInt(aprovado._hex);\n\n    if (aprovado <= 0 && balanceTRX >= 50){\n      await contractUSDT.approve(this.props.contractAddress, \"115792089237316195423570985008687907853269984665640564039457584007913129639935\").send();\n      window.alert(\"Balance approval for exchange: successful\");\n      return;\n    }\n\n    var amount = await Utils.contract.plans(valueUSDT).call();\n    amount = parseInt(amount._hex)/10**8;\n    amount = amount-balance;\n    amount = amount/this.state.precioSITE;\n\n    if ( aprovado > 0 && \n      balanceSite >= amount && \n      balanceTRX >= 50 \n      ){\n\n        var loc = document.location.href;\n        var sponsor = cons.WS;\n        var hand = 0;\n        var investors = await Utils.contract.investors(accountAddress).call();\n\n        if (investors.registered) {\n\n          sponsor = await Utils.contract.padre(accountAddress).call();\n\n        }else{\n\n          if(loc.indexOf('?')>0){\n            var getString = loc.split('?');\n            getString = getString[getString.length-1];\n            //console.log(getString);\n            var GET = getString.split('&');\n            var get = {};\n            for(var i = 0, l = GET.length; i < l; i++){\n                var tmp = GET[i].split('=');\n                get[tmp[0]] = unescape(decodeURI(tmp[1]));\n            }\n\n            if (get['hand']){\n              \n              tmp = get['hand'].split('#');\n  \n              if (tmp[0] === \"right\") {\n                hand = 1;\n              }\n            }\n\n            if (get['ref']) {\n              tmp = get['ref'].split('#');\n\n              var wallet = await Utils.contract.idToAddress(tmp[0]).call();\n              wallet = window.tronWeb.address.fromHex(wallet);\n\n              var padre = await Utils.contract.investors(wallet).call();\n\n              if ( padre.registered ) {\n                sponsor = wallet;\n              }\n            }\n\n          }\n          \n        }\n\n        if(!investors.registered){\n          var reg = Utils.contract.registro(sponsor, hand).send()\n          reg.then(() => window.alert(\"congratulation registration: successful\"));\n          return;\n        }\n\n        if(sponsor !== \"T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb\" && investors.registered && await Utils.contract.active(valueUSDT).call()){\n        \n          var userWithdrable = await Utils.contract.withdrawable(accountAddress).call();\n          userWithdrable = parseInt(userWithdrable._hex);\n          var MIN_RETIRO = await Utils.contract.MIN_RETIRO().call();\n          MIN_RETIRO = parseInt(MIN_RETIRO._hex);\n\n          var despositos = await Utils.contract.depositos(accountAddress).call();\n\n          console.log(despositos[0].length);\n\n          if (userWithdrable > MIN_RETIRO ){\n            window.alert(\"Va comprar plan de menor o igual valor debe retirar lo disponible para continuar.\");\n            if(window.confirm(\"¿Desea realizar el retiro de su disponible?.\")){\n              await Utils.contract.withdraw().send();\n              var buy = Utils.contract.buyPlan(valueUSDT).send()\n              buy.then(() => window.alert(\"Felicidades inversión exitosa\"))\n              .then(() => document.getElementById(\"services\").scrollIntoView({block: \"start\", behavior: \"smooth\"}));\n            }else{\n              if(window.confirm(\"¿Desea ccontinuar sin hacer un retiro?, si lo hace se reinvertira el disponible en el sistema de forma automatica.\")){\n                buy = Utils.contract.buyPlan(valueUSDT).send();\n                buy.then(() => window.alert(\"Felicidades inversión exitosa\"))\n              .then(() => document.getElementById(\"services\").scrollIntoView({block: \"start\", behavior: \"smooth\"}));\n\n              }else{\n                return;\n              }\n            }\n          \n          }if (despositos[0].length === 0){\n            buy = Utils.contract.buyPlan(valueUSDT).send();\n            buy.then(() => window.alert(\"Felicidades inversión exitosa\"))\n            .then(() => document.getElementById(\"services\").scrollIntoView({block: \"start\", behavior: \"smooth\"}));\n\n          }\n          \n        }else{\n          if (await Utils.contract.active(valueUSDT).call() === false) {\n            window.alert(\"Please select an active plan\");\n          } else {\n            window.alert(\"Please use referral link to buy a plan\");\n          }\n\n          \n        }\n          \n    }else{\n\n\n      if ( balanceSite < amount ) {\n\n        window.alert(\"You do not have enough balance, you need: \"+amount+\" USDT and in your wallet you have: \"+balanceSite);\n      }\n\n      if (balanceTRX < 50) {\n        window.alert(\"Your account must have at least 150 TRX to execute the transactions correctly\");\n  \n      }\n\n      \n    }\n\n\n  };\n\n  render() {\n\n    var {options} = this.state;\n\n    var segundoToken = <></>;\n\n    if (this.state.nameToken1 !== this.state.nameToken2) {\n      segundoToken = <>{this.state.nameToken2}: <strong>{(this.state.balanceUSDT*1).toFixed(6)}</strong><br /></> ;\n    }\n    \n    return (\n      <div className=\"card wow bounceInUp text-center col-md-7\" >\n        <div className=\"card-body\">\n          <h5 className=\"card-title\" id=\"contract\" >Contract V {this.props.version}</h5>\n\n          <table className=\"table borderless\">\n            <tbody>\n            <tr>\n              <td><i className=\"fa fa-check-circle-o text-success\"></i>ROI </td><td>{this.state.porcentaje}%</td>\n            </tr>\n            <tr>\n              <td><i className=\"fa fa-check-circle-o text-success\"></i>Earn</td><td>{(this.state.porcentaje)-100}%</td>\n            </tr>\n            </tbody>\n          </table>\n\n          <div className=\"form-group\">Wallet\n          <p className=\"card-text\">\n            <strong>{this.state.accountAddress}</strong><br />\n          </p>\n          <p className=\"card-text \">\n        \n            {this.state.nameToken1}: <strong>{this.state.balanceSite}</strong> (${(this.state.balanceSite*this.state.precioSITE).toFixed(2)})<br />\n            TRX: <strong>{(this.state.balanceTRX*1).toFixed(6)}</strong><br />\n            {segundoToken}\n          </p>\n\n          <h4>Plan Staking</h4>\n          <div className=\"input-group sm-3 text-center\">\n            <Select options={options}  onChange={this.handleChangeUSDT} className=\"form-control mb-20 h-auto\" />\n          </div>\n\n            <p className=\"card-text\">At least 150 TRX to make any transactions</p>\n            <p className=\"card-text\">Partner:<br />\n            <strong>{this.state.partner}</strong></p>\n\n            <button className=\"btn btn-lg btn-success\" onClick={() => this.deposit()}>{this.state.deposito}</button>\n\n          </div>\n\n        </div>\n      </div>\n\n\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}